name       : libspeex
version    : 1.2.0
release    : 4
source     :
    - https://github.com/xiph/speex/archive/Speex-1.2.0.tar.gz : 4781a30d3a501abc59a4266f9bbf8b1da66fd509bef014697dc3f61e406b990c
    - https://github.com/xiph/speexdsp/archive/SpeexDSP-1.2rc3.tar.gz : e8be7482df7c95735e5466efb371bd7f21115f39eb45c20ab7264d39c57b6413
homepage   : https://www.speex.org/
license    : BSD-2-Clause
component  : multimedia.codecs
summary    : Audio compression format designed for speech and its converter application
description: |
    Speex is an Open Source/Free Software patent-free audio compression format designed for speech. The Speex Project aims to lower the barrier of entry for voice applications by providing a free alternative to expensive proprietary speech codecs. The package also contains a command-line tool to convert to/from Speex codec.

    This package also contains SpeexDSP, a patent-free, Open Source/Free Software DSP library.
emul32     : yes
builddeps  :
    - pkgconfig32(ogg)
setup      : |
    tar xf $sources/SpeexDSP-*.tar.gz
    pushd speexdsp-*
        %patch -p1 < $pkgfiles/speexdsp-fixbuilds-774c87d.patch
        %reconfigure --disable-static
        %make
        %make_install
    popd

    export SPEEXDSP_CFLAGS="-I$installdir/usr/include"
    export SPEEXDSP_LIBS="-L$installdir%libdir% -lspeexdsp"
    %autogen --disable-static --enable-binaries
build      : |
    export SPEEXDSP_CFLAGS="-I$installdir/usr/include"
    export SPEEXDSP_LIBS="-L$installdir%libdir% -lspeexdsp"
    %make
install    : |
    export SPEEXDSP_CFLAGS="-I$installdir/usr/include"
    export SPEEXDSP_LIBS="-L$installdir%libdir% -lspeexdsp"
    %make_install
